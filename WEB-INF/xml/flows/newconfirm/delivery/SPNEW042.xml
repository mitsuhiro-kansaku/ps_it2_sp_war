<?xml version="1.0" encoding="UTF-8"?>
<flow xmlns="http://www.springframework.org/schema/webflow"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.springframework.org/schema/webflow
        http://www.springframework.org/schema/webflow/spring-webflow-2.0.xsd"
	parent="base">
	<!-- 新着納期確認（詳細） -->

    <!-- 見積依頼新着情報 -->
    <var name="quotReqIdentify" class="fw.domain.sp.quot.quotreq.QuotReqIdentify"/>
    <!-- 注文シーケンス番号 -->
    <input name="orderSeq"/>
    <!-- 納期確認新着情報 -->
    <input name="delivMngIdentify" />
    
	<on-start>
		<evaluate expression="SPNEW042Service.detail(delivMngIdentify)"
			result="flowScope.delivDetail" />
	</on-start>

	<view-state id="SPNEW042" model="delivDetail"
		view="newconfirm/delivery/SPNEW042">
		<transition on="detail" to="SPNEW012" validate="false">
		  <set name="quotReqIdentify.quotReqSeq" value="requestParameters.quotReqSeq"/>
		</transition>
		
		<transition on="detailOther" to="SPNEW012Other" validate="false">
            <set name="quotReqIdentify.quotReqSeq" value="requestParameters.quotReqSeq"/>
        </transition>
        
        <transition on="download" validate="false">
            <evaluate expression="SPAttachFileService.downloadFromOrderAttachMng(requestParameters.seqNo)"/>
        </transition>
    </view-state>
    
    <!-- 見積依頼詳細(都度品) -->
    <subflow-state id="SPNEW012" subflow="newconfirm/quotReq/SPNEW012">
        <input name="identify" value="quotReqIdentify" />
    </subflow-state>
    
    <!-- 見積依頼詳細 (価格登録品)-->
    <subflow-state id="SPNEW012Other" subflow="newconfirm/quotReq/SPNEW012Other">
        <input name="identify" value="quotReqIdentify" />
    </subflow-state>
    
</flow>